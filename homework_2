# Task 2:

LVM. Imagine you're running out of space on your root device. 
As we found out during the lesson default CentOS installation should already have LVM, means you can easily extend size of your root device. 
So what are you waiting for? Just do it!

1. Create 2GB partition on /dev/sdc of type "Linux LVM"
[student@localhost ~]$ sudo fdisk /dev/sdb
...
Command (m for help): n
Partition number (3-128, default 3):
First sector (5244928-10485726, default 5244928):
Last sector, +sectors or +size{K,M,G,T,P} (5244928-10485726, default 10485726): +2G
Created partition 3

Command (m for help): t
Partition number (1-3, default 3):
Partition type (type L to list all types): 31
Changed type of partition 'Linux filesystem' to 'Linux LVM'

Command (m for help): w

2. Initialize the partition as a physical volume (PV)
[student@localhost ~]$ sudo pvcreate /dev/sdb3
  Physical volume "/dev/sdb3" successfully created.

3. Extend the volume group (VG) of your root device using your newly created PV
[student@localhost ~]$ sudo vgextend centos /dev/sdb3
  Volume group "centos" successfully extended

4. Extend your root logical volume (LV) by 1GB, leaving other 1GB unassigned
[student@localhost ~]$ sudo lvextend -L +1G /dev/mapper/centos-root
  Size of logical volume centos/root changed from <6.20 GiB (1586 extents) to <7.20 GiB (1842 extents).
  Logical volume centos/root successfully resized.

5. Check current disk space usage of your root device
[student@localhost ~]$ df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 484M     0  484M   0% /dev
tmpfs                    496M     0  496M   0% /dev/shm
tmpfs                    496M  6.8M  489M   2% /run
tmpfs                    496M     0  496M   0% /sys/fs/cgroup
/dev/mapper/centos-root  6.2G  2.5G  3.8G  40% /
...

6. Extend your root device filesystem to be able to use additional free space of root LV
[student@localhost ~]$ sudo xfs_growfs /dev/mapper/centos-root
meta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=406016 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0 spinodes=0
data     =                       bsize=4096   blocks=1624064, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
data blocks changed from 1624064 to 1886208

7. Verify that after reboot your root device is still 1GB bigger than at 2.5.
[student@localhost ~]$ sudo reboot
...
[student@localhost ~]$ df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 484M     0  484M   0% /dev
tmpfs                    496M     0  496M   0% /dev/shm
tmpfs                    496M  6.8M  489M   2% /run
tmpfs                    496M     0  496M   0% /sys/fs/cgroup
/dev/mapper/centos-root  7.2G  2.5G  4.8G  34% /
/dev/sdb1                2.0G   33M  2.0G   2% /backup
/dev/sda1               1014M  168M  847M  17% /boot
tmpfs                    100M     0  100M   0% /run/user/0
tmpfs                    100M     0  100M   0% /run/user/1000
